(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{3831:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/log-in",function(){return t(3496)}])},3496:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return g}});var a=t(4051),r=t.n(a),s=t(5893),o=t(7294),i=t(1551),c=t.n(i),l=t(5503),u=t(7702),p=(0,l.ZF)({apiKey:"AIzaSyCg7Lsv6ea_gSxxJ_vgJg2WtfstP80lJoo",authDomain:"blogapp-c6647.firebaseapp.com",databaseURL:"https://blogapp-c6647-default-rtdb.firebaseio.com",projectId:"blogapp-c6647",storageBucket:"blogapp-c6647.appspot.com",messagingSenderId:"705658367990",appId:"1:705658367990:web:6a599809746b2465c5e1d7"}),d=(0,u.v0)(p),h=t(2586),f=t.n(h);function v(e,n,t,a,r,s,o){try{var i=e[s](o),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(a,r)}function x(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var s=e.apply(n,t);function o(e){v(s,a,r,o,i,"next",e)}function i(e){v(s,a,r,o,i,"throw",e)}o(void 0)}))}}var g=function(e){var n=e.onIsLogged,t=e.onUser,a=(0,o.useState)(!1),i=a[0],l=a[1],p=(0,o.useState)(!1),h=p[0],v=p[1],g=(0,o.useState)(!1),b=g[0],m=g[1],_=(0,o.useState)(!1),j=_[0],w=_[1],N=(0,o.useState)(""),S=N[0],y=N[1],k=(0,o.useState)(""),C=k[0],E=k[1],L=(0,o.useState)(""),P=L[0],I=L[1],Z=(0,o.useState)(""),B=Z[0],D=Z[1],F=(0,o.useState)(""),J=F[0],U=F[1],A=(0,o.useState)({}),O=A[0],R=A[1],W=function(){var e=x(r().mark((function e(a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,(0,u.Xb)(d,C,P);case 4:return s=e.sent,v(!0),n(!0),e.next=9,t(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}(),X=(0,o.useCallback)(function(){var e=x(r().mark((function e(a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,(0,u.e5)(d,B,J);case 4:return s=e.sent,v(!0),n(!0),e.next=9,t(s);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),m(!0),w(!0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}(),[B,J,O,n,t]);(0,o.useEffect)((function(){(0,u.Aj)(d,(function(e){R(e)}))}),[X]),(0,o.useEffect)((function(){h||(0,u.w7)(d)}),[h]);var T=b&&j?"".concat(f().invalid):"",z=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Login"}),(0,s.jsxs)("form",{onSubmit:X,children:[(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"text",placeholder:"email...",className:T,value:B,onChange:function(e){return D(e.target.value)},onBlur:function(){w(!1)}}),(0,s.jsx)("label",{children:"Password"}),(0,s.jsx)("input",{type:"password",placeholder:"password...",className:T,value:J,onChange:function(e){return U(e.target.value)}}),b&&j&&(0,s.jsx)("p",{children:"wrong email or password"}),(0,s.jsx)("button",{className:f().btn,type:"submit",children:"Login"}),(0,s.jsx)("button",{className:f().btn,type:"button",onClick:function(){return l(!0)},children:"Register"})]})]}),K=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Sign up"}),(0,s.jsxs)("form",{onSubmit:W,children:[(0,s.jsx)("label",{children:"Username"}),(0,s.jsx)("input",{type:"text",placeholder:"name...",value:S,onChange:function(e){return y(e.target.value)}}),(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"text",placeholder:"email...",vlaue:C,onChange:function(e){return E(e.target.value)}}),(0,s.jsx)("label",{children:"Password"}),(0,s.jsx)("input",{type:"password",placeholder:"password...",value:P,onChange:function(e){return I(e.target.value)}}),(0,s.jsx)("button",{className:f().btn,type:"submit",children:"Register"}),(0,s.jsx)("button",{className:f().btn,type:"button",onClick:function(){return l(!1)},children:"Login"})]})]});return(0,s.jsx)("div",{className:f().container,children:(null===O||void 0===O?void 0:O.email)?(0,s.jsxs)("div",{className:f().welcome,children:[(0,s.jsxs)("h2",{children:["WELCOME ",null===O||void 0===O?void 0:O.email.split("@",1)[0]]}),(0,s.jsxs)("div",{className:f().actions,children:[(0,s.jsx)(c(),{href:"/",children:(0,s.jsx)("a",{children:"go to main page"})}),(0,s.jsx)("button",{className:f().btn,onClick:function(){(0,u.w7)(d),t("")},children:"logout"})]})]}):(0,s.jsx)("div",{className:f().box,children:i?K:z})})}},2586:function(e){e.exports={container:"log-in_container__jIcW2",box:"log-in_box__LJkFh",invalid:"log-in_invalid__ZU__Z",btn:"log-in_btn__DnwZA",welcome:"log-in_welcome__t0gsB",actions:"log-in_actions__falZB"}}},function(e){e.O(0,[301,825,774,888,179],(function(){return n=3831,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{3831:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/log-in",function(){return t(3496)}])},3496:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var o=t(4051),a=t.n(o),r=t(5893),s=t(7294),l=t(1551),i=t.n(l),c=t(5503),u=t(7702),d=(0,c.ZF)({apiKey:"AIzaSyCg7Lsv6ea_gSxxJ_vgJg2WtfstP80lJoo",authDomain:"blogapp-c6647.firebaseapp.com",databaseURL:"https://blogapp-c6647-default-rtdb.firebaseio.com",projectId:"blogapp-c6647",storageBucket:"blogapp-c6647.appspot.com",messagingSenderId:"705658367990",appId:"1:705658367990:web:6a599809746b2465c5e1d7"}),p=(0,u.v0)(d),g=t(2586),h=t.n(g);function v(e,n,t,o,a,r,s){try{var l=e[r](s),i=l.value}catch(c){return void t(c)}l.done?n(i):Promise.resolve(i).then(o,a)}function f(e){return function(){var n=this,t=arguments;return new Promise((function(o,a){var r=e.apply(n,t);function s(e){v(r,o,a,s,l,"next",e)}function l(e){v(r,o,a,s,l,"throw",e)}s(void 0)}))}}var x=function(e){var n=e.onIsLogged,t=e.onUser,o=(0,s.useState)(!1),l=o[0],c=o[1],d=(0,s.useState)(!1),g=d[0],v=d[1],x=(0,s.useState)(!1),m=x[0],b=x[1],_=(0,s.useState)(!1),j=_[0],w=_[1],S=(0,s.useState)(""),N=S[0],y=S[1],k=(0,s.useState)(""),C=k[0],E=k[1],L=(0,s.useState)(""),P=L[0],I=L[1],U=(0,s.useState)(""),Z=U[0],B=U[1],D=(0,s.useState)(""),F=D[0],J=D[1],R=(0,s.useState)({}),A=R[0],O=R[1];console.log((null===A||void 0===A?void 0:A.email)+" USER"),console.log(A);var W=function(){var e=f(a().mark((function e(o){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),console.log("first"),e.prev=2,e.next=5,(0,u.Xb)(p,C,P);case 5:return r=e.sent,v(!0),n(!0),e.next=10,t(r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();console.log(null===A||void 0===A?void 0:A.email);var X=(0,s.useCallback)(function(){var e=f(a().mark((function e(o){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),console.log("lol"),e.prev=2,e.next=5,(0,u.e5)(p,Z,F);case 5:return r=e.sent,v(!0),console.log(r),n(!0),e.next=11,t(r);case 11:console.log(A),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),b(!0),w(!0);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(n){return e.apply(this,arguments)}}(),[Z,F,A,n,t]);(0,s.useEffect)((function(){(0,u.Aj)(p,(function(e){O(e)}))}),[X]),(0,s.useEffect)((function(){g||(console.log("logging out"),(0,u.w7)(p))}),[g]);var T=m&&j?"".concat(h().invalid):"",z=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"Login"}),(0,r.jsxs)("form",{onSubmit:X,children:[(0,r.jsx)("label",{children:"Email"}),(0,r.jsx)("input",{type:"text",placeholder:"email...",className:T,value:Z,onChange:function(e){return B(e.target.value)},onBlur:function(){w(!1)}}),(0,r.jsx)("label",{children:"Password"}),(0,r.jsx)("input",{type:"password",placeholder:"password...",className:T,value:F,onChange:function(e){return J(e.target.value)}}),m&&j&&(0,r.jsx)("p",{children:"wrong email or password"}),(0,r.jsx)("button",{className:h().btn,type:"submit",children:"Login"}),(0,r.jsx)("button",{className:h().btn,type:"button",onClick:function(){return c(!0)},children:"Register"})]})]}),K=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"Sign up"}),(0,r.jsxs)("form",{onSubmit:W,children:[(0,r.jsx)("label",{children:"Username"}),(0,r.jsx)("input",{type:"text",placeholder:"name...",value:N,onChange:function(e){return y(e.target.value)}}),(0,r.jsx)("label",{children:"Email"}),(0,r.jsx)("input",{type:"text",placeholder:"email...",vlaue:C,onChange:function(e){return E(e.target.value)}}),(0,r.jsx)("label",{children:"Password"}),(0,r.jsx)("input",{type:"password",placeholder:"password...",value:P,onChange:function(e){return I(e.target.value)}}),(0,r.jsx)("button",{className:h().btn,type:"submit",children:"Register"}),(0,r.jsx)("button",{className:h().btn,type:"button",onClick:function(){return c(!1)},children:"Login"})]})]});return(0,r.jsx)("div",{className:h().container,children:(null===A||void 0===A?void 0:A.email)?(0,r.jsxs)("div",{className:h().welcome,children:[(0,r.jsxs)("h2",{children:["WELCOME ",null===A||void 0===A?void 0:A.email.split("@",1)[0]]}),(0,r.jsxs)("div",{className:h().actions,children:[(0,r.jsx)(i(),{href:"/",children:(0,r.jsx)("a",{children:"go to main page"})}),(0,r.jsx)("button",{className:h().btn,onClick:function(){(0,u.w7)(p),t("")},children:"logout"})]})]}):(0,r.jsx)("div",{className:h().box,children:l?K:z})})}},2586:function(e){e.exports={container:"log-in_container__jIcW2",box:"log-in_box__LJkFh",invalid:"log-in_invalid__ZU__Z",btn:"log-in_btn__DnwZA",welcome:"log-in_welcome__t0gsB",actions:"log-in_actions__falZB"}}},function(e){e.O(0,[301,825,774,888,179],(function(){return n=3831,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
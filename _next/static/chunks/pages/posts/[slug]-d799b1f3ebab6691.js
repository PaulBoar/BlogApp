(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{843:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[slug]",function(){return t(8078)}])},8078:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return x},default:function(){return b}});var s=t(5893),o=t(5675),r=t.n(o),c=t(4129),i=t(9194),a=t.n(i),u=t(4051),l=t.n(u),m=t(7294),d=t(1664),f=t.n(d),p=t(3842),h=t.n(p);function _(n,e,t,s,o,r,c){try{var i=n[r](c),a=i.value}catch(u){return void t(u)}i.done?e(a):Promise.resolve(a).then(s,o)}function v(n){return function(){var e=this,t=arguments;return new Promise((function(s,o){var r=n.apply(e,t);function c(n){_(r,s,o,c,i,"next",n)}function i(n){_(r,s,o,c,i,"throw",n)}c(void 0)}))}}var g=function(n){var e,t=n.slug,o=(n.logged,n.user),r=(0,m.useState)(""),c=r[0],i=r[1],a=(0,m.useState)([]),u=a[0],d=a[1];console.log(null===o||void 0===o||null===(e=o.user)||void 0===e?void 0:e.email);var p=function(){var n=v(l().mark((function n(e){var t;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=4,b({comment:c,author:null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.email});case 4:i(""),g();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),_=[];function g(){return x.apply(this,arguments)}function x(){return(x=v(l().mark((function n(){var e,s,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"));case 2:return e=n.sent,n.next=5,e.json();case 5:for(o in s=n.sent)_.push({id:o,comment:s[o].comment,author:s[o].author});d(_);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(n,e){return j.apply(this,arguments)}function j(){return(j=v(l().mark((function n(e,s){var o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"),{method:"POST",body:JSON.stringify(e,null===s||void 0===s?void 0:s.user.email),headers:{"Content-Type":"application/json"}});case 4:return o=n.sent,n.next=7,o.json();case 7:n.sent;case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,m.useEffect)((function(){g()}),[]),function(){var n=v(l().mark((function n(e){var s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"),{method:"DELETE",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 2:return s=n.sent,n.next=5,s.json();case 5:n.sent;case 6:case"end":return n.stop()}}),n)})))}(),(0,s.jsxs)("div",{className:h().forum,children:[(0,s.jsxs)("div",{className:h().comments,children:[(0,s.jsx)("h3",{children:"Comments"}),u&&u.map((function(n){var e;return(0,s.jsxs)("div",{className:h().comment,children:[(0,s.jsxs)("p",{children:[n.comment," "]}),(0,s.jsxs)("span",{children:["by ",null===(e=n.author)||void 0===e?void 0:e.split("@",1)[0]]})]},n.id)}))]}),(0,s.jsxs)("form",{className:h().form,onSubmit:p,children:[(0,s.jsx)("label",{type:"text",className:h().label,children:"Write a comment"}),(0,s.jsx)("input",{type:"text",placeholder:"Type...",className:h().input,value:c,onChange:function(n){i(n.target.value)}}),(0,s.jsx)("button",{disabled:!o,type:"submit",className:h().btn,children:"Add comment"}),!o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"to add a comment login"}),(0,s.jsx)(f(),{href:"/log-in",children:(0,s.jsx)("button",{className:h().btn,children:"Login"})})]})]})]})};var x=!0,b=function(n){var e=n.blog,t=n.isLogged,o=n.user,i=e.fields,u=i.title,l=i.featuredImage,m=i.postContent,d=i.slug;return console.log((null===o||void 0===o?void 0:o.email)+" email?"),(0,s.jsxs)("section",{className:a()["blog-post"],children:[(0,s.jsx)("div",{className:a().image,children:(0,s.jsx)(r(),{src:"http:".concat(l.fields.file.url),loader:function(n){var e=n.src,t=n.quality,s=n.width,o=["w=".concat(s)];return t&&o.push("q=".concat(t)),"".concat(e,"?").concat(o.join("&"))},width:720,height:400,alt:"post image"})}),(0,s.jsxs)("div",{className:a().container,children:[(0,s.jsxs)("h2",{children:[" ",u]}),(0,s.jsx)("div",{className:a().content,children:(0,c.h)(m)}),(0,s.jsx)(g,{slug:d,logged:t,user:o})]})]})}},3842:function(n){n.exports={forum:"comments-section_forum__CITSc",form:"comments-section_form__Q3khm",label:"comments-section_label__gDqF6",input:"comments-section_input__rVoRi",btn:"comments-section_btn__t6I06",comments:"comments-section_comments__0SRos",comment:"comments-section_comment__9iu0X"}},9194:function(n){n.exports={"blog-post":"_slug__blog-post__eYX9o",image:"_slug__image__CGDzT",container:"_slug__container__h39iy",content:"_slug__content__PB34p"}}},function(n){n.O(0,[369,774,888,179],(function(){return e=843,n(n.s=e);var e}));var e=n.O();_N_E=e}]);
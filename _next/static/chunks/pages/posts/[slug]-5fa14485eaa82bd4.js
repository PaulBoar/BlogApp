(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{843:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[slug]",function(){return e(8078)}])},8078:function(n,t,e){"use strict";e.r(t),e.d(t,{__N_SSG:function(){return g},default:function(){return b}});var s=e(5893),o=e(5675),r=e.n(o),c=e(4129),i=e(9194),a=e.n(i),u=e(4051),l=e.n(u),m=e(7294),d=e(1664),f=e.n(d),p=e(3842),h=e.n(p);function _(n,t,e,s,o,r,c){try{var i=n[r](c),a=i.value}catch(u){return void e(u)}i.done?t(a):Promise.resolve(a).then(s,o)}function v(n){return function(){var t=this,e=arguments;return new Promise((function(s,o){var r=n.apply(t,e);function c(n){_(r,s,o,c,i,"next",n)}function i(n){_(r,s,o,c,i,"throw",n)}c(void 0)}))}}var x=function(n){var t=n.slug,e=(n.logged,n.user),o=(0,m.useState)(""),r=o[0],c=o[1],i=(0,m.useState)([]),a=i[0],u=i[1],d=function(){var n=v(l().mark((function n(t){var s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=4,g({comment:r,author:null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.email});case 4:c(""),_();case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),p=[];function _(){return x.apply(this,arguments)}function x(){return(x=v(l().mark((function n(){var e,s,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"));case 2:return e=n.sent,n.next=5,e.json();case 5:for(o in s=n.sent)p.push({id:o,comment:s[o].comment,author:s[o].author});u(p);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(n,t){return b.apply(this,arguments)}function b(){return(b=v(l().mark((function n(e,s){var o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"),{method:"POST",body:JSON.stringify(e,null===s||void 0===s?void 0:s.user.email),headers:{"Content-Type":"application/json"}});case 4:return o=n.sent,n.next=7,o.json();case 7:n.sent;case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,m.useEffect)((function(){_()}),[]),function(){var n=v(l().mark((function n(e){var s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"),{method:"DELETE",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 2:return s=n.sent,n.next=5,s.json();case 5:n.sent;case 6:case"end":return n.stop()}}),n)})))}(),(0,s.jsxs)("div",{className:h().forum,children:[(0,s.jsxs)("div",{className:h().comments,children:[(0,s.jsx)("h3",{children:"Comments"}),a&&a.map((function(n){var t;return(0,s.jsxs)("div",{className:h().comment,children:[(0,s.jsxs)("p",{children:[n.comment," "]}),(0,s.jsxs)("span",{children:["by ",null===(t=n.author)||void 0===t?void 0:t.split("@",1)[0]]})]},n.id)}))]}),(0,s.jsxs)("form",{className:h().form,onSubmit:d,children:[(0,s.jsx)("label",{type:"text",className:h().label,children:"Write a comment"}),(0,s.jsx)("input",{type:"text",placeholder:"Type...",className:h().input,value:r,onChange:function(n){c(n.target.value)}}),(0,s.jsx)("button",{disabled:!e,type:"submit",className:h().btn,children:"Add comment"}),!e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"to add a comment login"}),(0,s.jsx)(f(),{href:"/log-in",children:(0,s.jsx)("button",{className:h().btn,children:"Login"})})]})]})]})};var g=!0,b=function(n){var t=n.blog,e=n.isLogged,o=n.user,i=t.fields,u=i.title,l=i.featuredImage,m=i.postContent,d=i.slug;return(0,s.jsxs)("section",{className:a()["blog-post"],children:[(0,s.jsx)("div",{className:a().image,children:(0,s.jsx)(r(),{src:"https:".concat(l.fields.file.url),loader:function(n){var t=n.src,e=n.quality,s=n.width,o=["w=".concat(s)];return e&&o.push("q=".concat(e)),"".concat(t,"?").concat(o.join("&"))},width:720,height:400,alt:"post image"})}),(0,s.jsxs)("div",{className:a().container,children:[(0,s.jsxs)("h2",{children:[" ",u]}),(0,s.jsx)("div",{className:a().content,children:(0,c.h)(m)}),(0,s.jsx)(x,{slug:d,logged:e,user:o})]})]})}},3842:function(n){n.exports={forum:"comments-section_forum__CITSc",form:"comments-section_form__Q3khm",label:"comments-section_label__gDqF6",input:"comments-section_input__rVoRi",btn:"comments-section_btn__t6I06",comments:"comments-section_comments__0SRos",comment:"comments-section_comment__9iu0X"}},9194:function(n){n.exports={"blog-post":"_slug__blog-post__eYX9o",image:"_slug__image__CGDzT",container:"_slug__container__h39iy",content:"_slug__content__PB34p"}}},function(n){n.O(0,[369,774,888,179],(function(){return t=843,n(n.s=t);var t}));var t=n.O();_N_E=t}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{843:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[slug]",function(){return t(8078)}])},8078:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return x},default:function(){return b}});var o=t(5893),s=t(5675),r=t.n(s),c=t(4129),i=t(9194),a=t.n(i),u=t(4051),l=t.n(u),m=t(7294),d=t(1664),f=t.n(d),p=t(3842),h=t.n(p);function _(n,e,t,o,s,r,c){try{var i=n[r](c),a=i.value}catch(u){return void t(u)}i.done?e(a):Promise.resolve(a).then(o,s)}function v(n){return function(){var e=this,t=arguments;return new Promise((function(o,s){var r=n.apply(e,t);function c(n){_(r,o,s,c,i,"next",n)}function i(n){_(r,o,s,c,i,"throw",n)}c(void 0)}))}}var g=function(n){var e,t=n.slug,s=n.logged,r=n.user,c=(0,m.useState)(""),i=c[0],a=c[1],u=(0,m.useState)([]),d=u[0],p=u[1];console.log(null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.email);var _=function(){var n=v(l().mark((function n(e){var t;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=4,j({comment:i,author:null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.email});case 4:a(""),x();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),g=[];function x(){return b.apply(this,arguments)}function b(){return(b=v(l().mark((function n(){var e,o,s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"));case 2:return e=n.sent,n.next=5,e.json();case 5:for(s in o=n.sent,console.log("fetchin"),o)g.push({id:s,comment:o[s].comment,author:o[s].author});p(g),console.log(g);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function j(n,e){return N.apply(this,arguments)}function N(){return(N=v(l().mark((function n(e,o){var s,r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"),{method:"POST",body:JSON.stringify(e,null===o||void 0===o?void 0:o.user.email),headers:{"Content-Type":"application/json"}});case 4:return s=n.sent,n.next=7,s.json();case 7:r=n.sent,console.log(r);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,m.useEffect)((function(){x()}),[]),console.log(i),function(){var n=v(l().mark((function n(e){var o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://blogapp-c6647-default-rtdb.firebaseio.com/comments/".concat(t,".json"),{method:"DELETE",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});case 2:return o=n.sent,console.log(t),n.next=6,o.json();case 6:n.sent;case 7:case"end":return n.stop()}}),n)})))}(),console.log(s),(0,o.jsxs)("div",{className:h().forum,children:[(0,o.jsxs)("div",{className:h().comments,children:[(0,o.jsx)("h3",{children:"Comments"}),d&&d.map((function(n){var e;return(0,o.jsxs)("div",{className:h().comment,children:[(0,o.jsxs)("p",{children:[n.comment," "]}),(0,o.jsxs)("span",{children:["by ",null===(e=n.author)||void 0===e?void 0:e.split("@",1)[0]]})]},n.id)}))]}),(0,o.jsxs)("form",{className:h().form,onSubmit:_,children:[(0,o.jsx)("label",{type:"text",className:h().label,children:"Write a comment"}),(0,o.jsx)("input",{type:"text",placeholder:"Type...",className:h().input,value:i,onChange:function(n){a(n.target.value)}}),(0,o.jsx)("button",{disabled:!r,type:"submit",className:h().btn,children:"Add comment"}),!r&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:"to add a comment login"}),(0,o.jsx)(f(),{href:"/log-in",children:(0,o.jsx)("button",{className:h().btn,children:"Login"})})]})]})]})};var x=!0,b=function(n){var e=n.blog,t=n.isLogged,s=n.user,i=e.fields,u=i.title,l=i.featuredImage,m=i.postContent,d=i.slug;return console.log((null===s||void 0===s?void 0:s.email)+" email?"),(0,o.jsxs)("section",{className:a()["blog-post"],children:[(0,o.jsx)("div",{className:a().image,children:(0,o.jsx)(r(),{src:"http:".concat(l.fields.file.url),width:720,height:400,alt:"post image"})}),(0,o.jsxs)("div",{className:a().container,children:[(0,o.jsxs)("h2",{children:[" ",u]}),(0,o.jsx)("div",{className:a().content,children:(0,c.h)(m)}),(0,o.jsx)(g,{slug:d,logged:t,user:s})]})]})}},3842:function(n){n.exports={forum:"comments-section_forum__CITSc",form:"comments-section_form__Q3khm",label:"comments-section_label__gDqF6",input:"comments-section_input__rVoRi",btn:"comments-section_btn__t6I06",comments:"comments-section_comments__0SRos",comment:"comments-section_comment__9iu0X"}},9194:function(n){n.exports={"blog-post":"_slug__blog-post__eYX9o",image:"_slug__image__CGDzT",container:"_slug__container__h39iy",content:"_slug__content__PB34p"}}},function(n){n.O(0,[369,774,888,179],(function(){return e=843,n(n.s=e);var e}));var e=n.O();_N_E=e}]);
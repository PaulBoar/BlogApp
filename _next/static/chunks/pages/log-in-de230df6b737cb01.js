(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{3831:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/log-in",function(){return t(3496)}])},3496:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var a=t(4051),r=t.n(a),s=t(5893),o=t(7294),i=t(1551),c=t.n(i),l=t(5503),u=t(7702),p=(0,l.ZF)({apiKey:"AIzaSyCg7Lsv6ea_gSxxJ_vgJg2WtfstP80lJoo",authDomain:"blogapp-c6647.firebaseapp.com",databaseURL:"https://blogapp-c6647-default-rtdb.firebaseio.com",projectId:"blogapp-c6647",storageBucket:"blogapp-c6647.appspot.com",messagingSenderId:"705658367990",appId:"1:705658367990:web:6a599809746b2465c5e1d7"}),d=(0,u.v0)(p),f=t(2586),h=t.n(f);function g(e,n,t,a,r,s,o){try{var i=e[s](o),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(a,r)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var s=e.apply(n,t);function o(e){g(s,a,r,o,i,"next",e)}function i(e){g(s,a,r,o,i,"throw",e)}o(void 0)}))}}var x=function(e){var n=e.onIsLogged,t=e.onUser,a=(0,o.useState)(!1),i=a[0],l=a[1],p=(0,o.useState)(!1),f=p[0],g=p[1],x=(0,o.useState)(!1),m=x[0],b=x[1],_=(0,o.useState)(!1),j=_[0],w=_[1],S=(0,o.useState)(""),N=S[0],y=S[1],k=(0,o.useState)(""),C=k[0],E=k[1],I=(0,o.useState)(""),L=I[0],P=I[1],Z=(0,o.useState)(""),B=Z[0],D=Z[1],F=(0,o.useState)(""),J=F[0],U=F[1],A=(0,o.useState)({}),O=A[0],R=A[1];(0,o.useEffect)((function(){localStorage.getItem("user")&&(g(!0),n(!0),t(localStorage.getItem("user")),console.log("useefect"))}),[]);var W=function(){var e=v(r().mark((function e(a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,(0,u.Xb)(d,C,L);case 4:return s=e.sent,g(!0),n(!0),e.next=9,t(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}(),X=(0,o.useCallback)(function(){var e=v(r().mark((function e(a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,(0,u.e5)(d,B,J);case 4:return s=e.sent,g(!0),n(!0),localStorage.setItem("user",{loginEmail:B,loginPassword:J}),e.next=10,t(s);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),b(!0),w(!0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}(),[B,J,O,n,t]);(0,o.useEffect)((function(){(0,u.Aj)(d,(function(e){R(e)}))}),[X]),(0,o.useEffect)((function(){f||(0,u.w7)(d)}),[f]);var T=m&&j?"".concat(h().invalid):"",z=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Login"}),(0,s.jsxs)("form",{onSubmit:X,children:[(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"text",placeholder:"email...",className:T,value:B,onChange:function(e){return D(e.target.value)},onBlur:function(){w(!1)}}),(0,s.jsx)("label",{children:"Password"}),(0,s.jsx)("input",{type:"password",placeholder:"password...",className:T,value:J,onChange:function(e){return U(e.target.value)}}),m&&j&&(0,s.jsx)("p",{children:"wrong email or password"}),(0,s.jsx)("button",{className:h().btn,type:"submit",children:"Login"}),(0,s.jsx)("button",{className:h().btn,type:"button",onClick:function(){return l(!0)},children:"Register"})]})]}),K=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Sign up"}),(0,s.jsxs)("form",{onSubmit:W,children:[(0,s.jsx)("label",{children:"Username"}),(0,s.jsx)("input",{type:"text",placeholder:"name...",value:N,onChange:function(e){return y(e.target.value)}}),(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"text",placeholder:"email...",vlaue:C,onChange:function(e){return E(e.target.value)}}),(0,s.jsx)("label",{children:"Password"}),(0,s.jsx)("input",{type:"password",placeholder:"password...",value:L,onChange:function(e){return P(e.target.value)}}),(0,s.jsx)("button",{className:h().btn,type:"submit",children:"Register"}),(0,s.jsx)("button",{className:h().btn,type:"button",onClick:function(){return l(!1)},children:"Login"})]})]});return(0,s.jsx)("div",{className:h().container,children:(null===O||void 0===O?void 0:O.email)?(0,s.jsxs)("div",{className:h().welcome,children:[(0,s.jsxs)("h2",{children:["WELCOME ",null===O||void 0===O?void 0:O.email.split("@",1)[0]]}),(0,s.jsxs)("div",{className:h().actions,children:[(0,s.jsx)(c(),{href:"/",children:(0,s.jsx)("a",{children:"go to main page"})}),(0,s.jsx)("button",{className:h().btn,onClick:function(){(0,u.w7)(d),g(!1),n(!1),t("")},children:"logout"})]})]}):(0,s.jsx)("div",{className:h().box,children:i?K:z})})}},2586:function(e){e.exports={container:"log-in_container__jIcW2",box:"log-in_box__LJkFh",invalid:"log-in_invalid__ZU__Z",btn:"log-in_btn__DnwZA",welcome:"log-in_welcome__t0gsB",actions:"log-in_actions__falZB"}}},function(e){e.O(0,[301,825,774,888,179],(function(){return n=3831,e(e.s=n);var n}));var n=e.O();_N_E=n}]);